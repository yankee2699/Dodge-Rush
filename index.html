<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Survival Dodge Game</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #111;
    color: #fff;
    font-family: Arial, sans-serif;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: #222;
    border: 2px solid #fff;
  }
  #score {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
  }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const player = {
  x: canvas.width / 2 - 20,
  y: canvas.height - 60,
  width: 40,
  height: 40,
  speed: 6,
};

let obstacles = [];
let score = 0;
let gameOver = false;

const keys = {};
document.addEventListener('keydown', (e) => keys[e.key] = true);
document.addEventListener('keyup', (e) => keys[e.key] = false);

// Create new obstacles
function spawnObstacle() {
  const size = Math.random() * 30 + 20;
  const x = Math.random() * (canvas.width - size);
  const speed = Math.random() * 3 + 2 + score/100; // increases with score
  obstacles.push({ x, y: -size, width: size, height: size, speed });
}

// Update game state
function update() {
  if(gameOver) return;

  // Move player
  if(keys['ArrowLeft'] || keys['a']) player.x -= player.speed;
  if(keys['ArrowRight'] || keys['d']) player.x += player.speed;
  if(keys['ArrowUp'] || keys['w']) player.y -= player.speed;
  if(keys['ArrowDown'] || keys['s']) player.y += player.speed;

  // Keep player inside canvas
  player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
  player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));

  // Move obstacles
  obstacles.forEach(o => o.y += o.speed);

  // Remove obstacles that went off screen
  obstacles = obstacles.filter(o => o.y < canvas.height);

  // Check collisions
  obstacles.forEach(o => {
    if(player.x < o.x + o.width &&
       player.x + player.width > o.x &&
       player.y < o.y + o.height &&
       player.y + player.height > o.y) {
         gameOver = true;
    }
  });

  // Increase score
  score += 1;
  document.getElementById('score').innerText = `Score: ${score}`;
}

// Draw everything
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw player
  ctx.fillStyle = '#0f0';
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Draw obstacles
  ctx.fillStyle = '#f00';
  obstacles.forEach(o => ctx.fillRect(o.x, o.y, o.width, o.height));

  if(gameOver) {
    ctx.fillStyle = '#fff';
    ctx.font = '30px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Game Over', canvas.width/2, canvas.height/2);
    ctx.fillText('Press R to Restart', canvas.width/2, canvas.height/2 + 40);
  }
}

// Game loop
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

// Spawn obstacles every 1 second
setInterval(() => { if(!gameOver) spawnObstacle(); }, 1000);

// Restart game
document.addEventListener('keydown', (e) => {
  if(e.key === 'r' && gameOver) {
    obstacles = [];
    score = 0;
    gameOver = false;
    player.x = canvas.width/2 - 20;
    player.y = canvas.height - 60;
  }
});

loop();
</script>
</body>
</html>
